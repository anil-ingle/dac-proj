package com.dac.onlineparking.module.user;

import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.stereotype.Repository;

import com.dac.onlineparking.util.UserQuery;

@Repository
public class UserDAO {
	@Autowired
	private JdbcTemplate jdbcTemplate;

	public List<CityAreaVO> selectCityArea(int areaId) {
		List<CityAreaVO> areaVOs = jdbcTemplate.query(UserQuery.SLECT_CITY_AREA, (ResultSet rs) -> {
			List<CityAreaVO> areaVOs1 = new ArrayList<CityAreaVO>();
			while (rs.next()) {
				CityAreaVO areaVO = new CityAreaVO();
				areaVO.setAreaId(rs.getInt("area_id"));
				areaVO.setAreaName(rs.getString("area_name"));
				areaVOs1.add(areaVO);
			} // while
			return areaVOs1;
		}// extractData(-)
				, areaId);

		return areaVOs;
	}

	public List<UserBookSlotVO> getAreaSlot(Integer areaId) {
		List<UserBookSlotVO> bookSlotVO = jdbcTemplate.query(UserQuery.SELECT_AREASLOT, (ResultSet rs) -> {
			List<UserBookSlotVO> bookSlotVO1 = new ArrayList<UserBookSlotVO>();
			while (rs.next()) {
				UserBookSlotVO vo = new UserBookSlotVO();
				vo.setfSlotId(rs.getInt("id"));
				vo.setSlotNumber(rs.getInt("slot_number"));
				vo.setIsReserved(rs.getInt("is_reserved"));
				vo.setfSlotId(rs.getInt("fslot_id"));
				bookSlotVO1.add(vo);
			} // while
			return bookSlotVO1;
		}// extractData(-)
				, areaId);

		return bookSlotVO;
	}

	
}
