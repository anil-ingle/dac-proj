package com.dac.onlineparking.module.login;

import java.sql.ResultSet;

import javax.activation.DataSource;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.stereotype.Repository;

import com.dac.onlineparking.util.UserQuery;

@Repository
public class LoginDAO {
	@Autowired
	private DataSource dataSource;

	@Autowired
	private JdbcTemplate jdbcTemplate;

	public LoginVO login(String userName, String password) {

		LoginVO vo = jdbcTemplate.queryForObject(UserQuery.LOGIN_USSER, (ResultSet rs, int index) -> {
			LoginVO evo = new EmployeeBO();
			// copy record from ResultSet obj to VO class object
			vo.setId(rs.getInt("id"));
			evo.setfName(rs.getString("fname"));
			evo.setlName(rs.getString("lname"));
			evo.setEmail(rs.getString("email"));
			evo.setRoll(rs.getInt("roll"));
			evo.setGender(rs.getString("gender"));
			evo.setMobileNumber(rs.getString("mobileNumber"));
			evo.setTotalAmount(rs.getDouble("totalamount"));
			return ebo;
		}// mapRow
				, userName, password);
		return vo;
	}// method

}
